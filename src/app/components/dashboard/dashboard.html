<div class="dash">
  @if (resumables().length) {
  <mat-card class="resume card-glass">
    <div class="resume-title">
      <mat-icon>history</mat-icon><span>Resume</span>
    </div>
    <div class="resume-list">
      @for (r of resumables(); track $index) {
      <button
        mat-stroked-button
        class="ring"
        (click)="resume(r)"
      >
        <mat-icon>{{ r.key.kind === 'generated' ? 'auto_awesome' : 'edit' }}</mat-icon>
        <span>{{ r.label | titlecase}}</span>
        <span class="prog">{{ (r.progress * 100) | number : '1.0-0' }}%</span>
      </button>
      }
    </div>
  </mat-card>
  }

  <mat-card class="hero card-glass">
    <div class="title">
      <mat-icon>lightbulb</mat-icon>
      <div>
        <h1>Welcome</h1>
        <p class="sub">Solve any Sudoku — or learn it step by step.</p>
      </div>
    </div>

    <div class="actions">
      <button
        mat-flat-button
        color="primary"
        class="btn-pill"
        (click)="manualEntry()"
      >
        <mat-icon>edit</mat-icon>&nbsp;Manual Entry
      </button>
      <button
        mat-stroked-button
        class="ring"
        (click)="importCsv()"
      >
        <mat-icon>file_upload</mat-icon>&nbsp;Import CSV
      </button>
      <button
        mat-stroked-button
        class="ring"
        (click)="importPhoto()"
      >
        <mat-icon>photo_camera</mat-icon>&nbsp;Import Photo
      </button>
      <button
        mat-stroked-button
        class="ring"
        (click)="generatePuzzle()"
      >
        <mat-icon>auto_awesome</mat-icon>&nbsp;Generate Puzzle
      </button>
    </div>
  </mat-card>

  <!-- Future: stats cards (placeholders) -->
  <div class="dash-card stats card-glass">
    <div class="stats-header">
      <h3>Session Stats</h3>
      <div class="totals">
        <span><strong>{{ total().solved }}</strong> solved</span>
        <span><strong>{{ total().totalScore | number }}</strong> pts</span>
        <span><strong>{{ total().totalHints }}</strong> hints</span>
        <span><strong>{{ total().totalMistakes }}</strong> mistakes</span>
      </div>
    </div>

    <div class="stats-grid">
      <div class="scol">
        <div class="h">Easy</div>
        <div class="r"><span>Best Time</span><span>{{ mmss(byDiff().easy.bestTimeMs) }}</span></div>
        <div class="r"><span>Best Score</span><span>{{ byDiff().easy.bestScore ?? '—' }}</span></div>
        <div class="r"><span>Solved</span><span>{{ byDiff().easy.solved }}</span></div>
        <div class="r"><span>Total Points</span><span>{{ byDiff().easy.totalScore | number }}</span></div>
        <div class="r"><span>Hints</span><span>{{ byDiff().easy.totalHints }}</span></div>
        <div class="r"><span>Mistakes</span><span>{{ byDiff().easy.totalMistakes }}</span></div>
      </div>

      <div class="scol">
        <div class="h">Medium</div>
        <div class="r"><span>Best Time</span><span>{{ mmss(byDiff().medium.bestTimeMs) }}</span></div>
        <div class="r"><span>Best Score</span><span>{{ byDiff().medium.bestScore ?? '—' }}</span></div>
        <div class="r"><span>Solved</span><span>{{ byDiff().medium.solved }}</span></div>
        <div class="r"><span>Total Points</span><span>{{ byDiff().medium.totalScore | number }}</span></div>
        <div class="r"><span>Hints</span><span>{{ byDiff().medium.totalHints }}</span></div>
        <div class="r"><span>Mistakes</span><span>{{ byDiff().medium.totalMistakes }}</span></div>
      </div>

      <div class="scol">
        <div class="h">Hard</div>
        <div class="r"><span>Best Time</span><span>{{ mmss(byDiff().hard.bestTimeMs) }}</span></div>
        <div class="r"><span>Best Score</span><span>{{ byDiff().hard.bestScore ?? '—' }}</span></div>
        <div class="r"><span>Solved</span><span>{{ byDiff().hard.solved }}</span></div>
        <div class="r"><span>Total Points</span><span>{{ byDiff().hard.totalScore | number }}</span></div>
        <div class="r"><span>Hints</span><span>{{ byDiff().hard.totalHints }}</span></div>
        <div class="r"><span>Mistakes</span><span>{{ byDiff().hard.totalMistakes }}</span></div>
      </div>

      <div class="scol">
        <div class="h">Expert</div>
        <div class="r"><span>Best Time</span><span>{{ mmss(byDiff().expert.bestTimeMs) }}</span></div>
        <div class="r"><span>Best Score</span><span>{{ byDiff().expert.bestScore ?? '—' }}</span></div>
        <div class="r"><span>Solved</span><span>{{ byDiff().expert.solved }}</span></div>
        <div class="r"><span>Total Points</span><span>{{ byDiff().expert.totalScore | number }}</span></div>
        <div class="r"><span>Hints</span><span>{{ byDiff().expert.totalHints }}</span></div>
        <div class="r"><span>Mistakes</span><span>{{ byDiff().expert.totalMistakes }}</span></div>
      </div>
    </div>

    <!-- Optional: show techniques per difficulty (collapsed style) -->
    <div class="techs">
      <div class="tcol">
        <div class="th">Techniques (Easy)</div>
        <div class="chips">
          @for (t of byDiff().easy.techniques; track $index) { <span class="chip">{{ t }}</span> }
          @if (!byDiff().easy.techniques.length) { <span class="dim">—</span> }
        </div>
      </div>
      <div class="tcol">
        <div class="th">Techniques (Medium)</div>
        <div class="chips">
          @for (t of byDiff().medium.techniques; track $index) { <span class="chip">{{ t }}</span> }
          @if (!byDiff().medium.techniques.length) { <span class="dim">—</span> }
        </div>
      </div>
      <div class="tcol">
        <div class="th">Techniques (Hard)</div>
        <div class="chips">
          @for (t of byDiff().hard.techniques; track $index) { <span class="chip">{{ t }}</span> }
          @if (!byDiff().hard.techniques.length) { <span class="dim">—</span> }
        </div>
      </div>
      <div class="tcol">
        <div class="th">Techniques (Expert)</div>
        <div class="chips">
          @for (t of byDiff().expert.techniques; track $index) { <span class="chip">{{ t }}</span> }
          @if (!byDiff().expert.techniques.length) { <span class="dim">—</span> }
        </div>
      </div>
    </div>
  </div>
</div>
