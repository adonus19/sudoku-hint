 .board {
   display: inline-block;
   outline: none;
   user-select: none;
   border: 2px solid rgba(0, 0, 0, .6);
 }

 .row {
   display: flex;
 }

 .cell {
   width: 56px;
   aspect-ratio: 1 / 1;
   padding: 0;
   border: 1px solid rgba(0, 0, 0, .25);
   background: white;
   cursor: pointer;
   display: grid;
   place-items: center;
   font-size: 22px;
   line-height: 1;
   position: relative;
 }

 .cell .val {
   font-weight: 400;
 }

 /* Thick borders for 3x3 boxes */
 .row:nth-child(3n+1) .cell {
   border-top-width: 2px;
 }

 .row .cell:nth-child(3n+1) {
   border-left-width: 2px;
 }

 .row:nth-child(9) .cell {
   border-bottom-width: 2px;
 }

 .row .cell:nth-child(9) {
   border-right-width: 2px;
 }

 /* Given vs user styling */
 .cell.given .val {
   font-weight: 700;
   color: rgba(0, 0, 0, .87);
 }

 .cell.user .val {
   color: var(--mat-mdc-slide-toggle-selected-handle-color, #3f51b5);
 }

 /* Selected */
 .cell.selected {
   outline: 2px solid rgba(25, 118, 210, .9);
   outline-offset: -2px;
 }

 /* Highlight row/col/box (soft background) */
 .cell.hl-row,
 .cell.hl-col,
 .cell.hl-box {
   background: rgba(25, 118, 210, .08);
 }

 /* Stronger background where highlights overlap */
 .cell.hl-row.hl-col,
 .cell.hl-row.hl-box,
 .cell.hl-col.hl-box {
   background: rgba(25, 118, 210, .14);
 }

 /* Matching digits (value) */
 .cell.match .val {
   background: rgba(25, 118, 210, .15);
   border-radius: 4px;
   padding: 2px 6px;
 }

 /* Future: matching candidates (pencil marks) */
 .cell.match-cand::after {
   /* why: subtle ring to indicate a candidate match without value */
   content: '';
   position: absolute;
   inset: 4px;
   border: 2px dashed rgba(25, 118, 210, .6);
   border-radius: 6px;
   pointer-events: none;
 }

 /* Disabled (given while in user mode) */
 .cell:disabled {
   background: #fafafa;
   cursor: default;
 }

 /* Conflicts */
 .cell.conflict {
   box-shadow: inset 0 0 0 2px rgba(211, 47, 47, .9);
 }

 .cell.conflict .val {
   color: rgba(211, 47, 47, 1);
 }

 .legend {
   margin-top: 12px;
   display: flex;
   flex-wrap: wrap;
   gap: 8px;
 }

 .chip {
   padding: 2px 8px;
   border-radius: 12px;
   border: 1px solid rgba(0, 0, 0, .2);
   font-size: 12px;
 }

 .chip-given {
   font-weight: 700;
 }

 .chip-user {
   color: var(--mat-mdc-slide-toggle-selected-handle-color, #3f51b5);
 }

 .chip-selected {
   border-color: rgba(25, 118, 210, .9);
 }

 .chip-hl {
   background: rgba(25, 118, 210, .08);
 }

 .chip-match {
   background: rgba(25, 118, 210, .15);
 }

 .chip-conflict {
   border-color: rgba(211, 47, 47, .9);
   color: rgba(211, 47, 47, 1);
 }
